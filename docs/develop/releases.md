# Процесс разработки дистрибутива CalmiraLinux

## Процесс разработки

### 1. Расписание выхода релизов

На сегодняшний день нет точного расписания выхода релизов дистрибутива, кроме
негласного соглашения -- тестовые сборки и кандидаты в релизы выходят 5 числа
определённого месяца, а окончательные -- 15 числа. Версии системы выходят
только тогда, когда весь список задач из Roadmap для них выполнен и система
протестирована.

### 2. Тестирование дистрибутива и выход релизов

Здесь практикуется метод "тестирование во время разработки". Во время сборки
пакетов они сразу же тестируются предоставленными их разработчиками наборами
тестов для того, чтобы убедиться в том, что они полностью работоспособны и
совместимы с CalmiraLinux. Я (разработчик дистрибутива) стараюсь не применять
никаких патчей к пакетам, кроме тех, которые исправляют серьёзные уязвимости,
баги и прочее. Например, если пакет не следует стандарту FHS, и для него есть
патч, исправляющий это, то он применяется.

После сборки CPL и базовой системы, всё вместе так же тщательно тестируется на
реальном железе и виртуальной машине. Проверяются все необходимые пакеты на
работоспособность. Проверяется работа со сменными носителями, сетью и пр.

Только после всех этих действий выходят первые Alpa и Beta версии. Кандидаты в
релизы, как правило, почти полностью протестированы и готовы к использованию. В
них только лишь добавляется новый функционал, обновляются некоторые пакеты
(если заморозка пакетной базы ещё не выполняется) и выполняются конечные тесты.

Где-то после выхода второго кандидата в релизы выполняется заморозка пакетной
базы -- тогда прекращается обновление пакетов в CPL, CalmiraLinux, системе
портов (в ветке того будущего релиза) и пр., так же туда не добавляется новых
портов или пакетов.

После того, как весь список задач из Roadmap выполнен, выходит третий (обычно
окончательный) релиз-кандидат, на основе которого, обычно, позже формируется
финальная стабильная и окончательная версия дистрибутива. Если третий кандидат
в релизы работает стабильно, быстро, не потребляет много ресурсов ПК, а так же
все его пакеты собираются и функционируют корректно и не вызывают регрессий, то
на основе третьего кандидата в релизы собирается окончательный стабильный релиз
Calmira. Если есть ошибки в работе этого RC, то собираются следующие кандидаты
до тех пор, пока они не будут работать стабильно. И на основе последнего
стабильного кандидата собирается финальный релиз.

#### 2.1. Выход релизов

Сначала собирается временный инструментарий, который после тестирования сразу
же выкладывается на GitHub. Его версия = версии дистрибутива, которая будет
собираться с применением этого инструментария. После его релиза, собственно,
собирается сама CalmiraLinux (Alpha, Beta, RC и Final сборки). Параллельно
сборке дистрибутива, в репозитории системы портов создаётся отдельная ветка с
портами, предназначенными для ТЕСТОВОЙ версии системы. В этой ветке вносятся
все необходимые изменения, фиксы и прочее, что предназначено только для
разрабатываемой версии системы.

Когда финальный релиз CalmiraLinux полностью собран и протестирован, создаётся
финальный релиз системы портов для этой версии дистрибутива. Её версия = версии
дистрибутива.

После выхода релизов временного инструментария, CPL, системы портов, в репозиторий
GitHub выкладывается финальный релиз CalmiraLinux.

### 3. Наименование версий

Мажорная версия означает крупные изменения в дистрибутиве. Минорные версии же,
наоборот, являются корректирующими релизами с небольшими по значимости
изменениями. Например, это исправления мелких багов, обновления некоторых
пакетов до новых версий и пр.

У каждой версии системы есть своё кодовое имя. В качестве кодовых имён
выступают название созвездий. Они назначаются релизам в алфавитном порядке.

### 4. Распространение версий

Все релизы распространяются в репозитории GitHub ([ссылка](https://github.com/CalmiraLinux/CalmiraLinux/releases)).

Если раньше сюда выкладывались как версии самой системы CalmiraLinux (стабильные,
тестовые и кандидаты в релизы), так и временные инструментарии для сборки или
восстановления системы (для максимальной изоляции от хост-системы), то сейчас,
после выхода CPL в качестве платформы для сборки CalmiraLinux, все временные
инструментарии будут находиться только в репозитории [CPL](https://github.com/CalmiraLinux/CPL).
Это сделано для того, чтобы разгрузить репозиторий CalmiraLinux от лишних файлов
и убрать путаницу.

Версии дистрибутива и CPL распространяются в виде squashfs-снимков. В планах
начать распространение дистрибутива в виде загрузочного iso-образа, но пока
это не реализовано.
