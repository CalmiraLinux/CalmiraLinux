## История развития Calmira GNU/Linux

Calmira GNU/Linux - молодой дистрибутив, разрабатываемый в одиночку бывшим владельцем несколких небольших сообществ. Этот дистрибутив не такой удобный и функциональный, однако он развивается, хоть и медленно, а так же активно используется некоторыми людьми в своих целях.

## Цели появления

Если дистрибутив создавался "просто так", без целей, то он не будет нужен никому.

Calmira создавалась с несколькими целями. Во-первых, предоставление пользователю легковесной системы, которая смогла бы работать на оборудовании начала двухтысячных. Большинство "легковесных" дистрибутивов начинало отжирать столько ресурсов ПК, сколько не снилось даже  самому жирному дистрибутиву. Разработчику Calmira же это не нравилось.

Во-вторых, предоставление классического "олдскульного" окружения, которое нравилось в своё время матёрым линуксоидам. В некоторых случаях это даже лучше современного.

В-третьих, недовольство современными дистрибутивами. Одни не уважают частную жизнь и свободу пользователя, другие очень медленные и нестабильные, у третьих ужасные системные компоненты и т.д. Поэтому неплохо было бы сделать дистрибутив "для себя", "для души", и поделиться наработками с сообществом. Так же дистрибутив должен быть надёжным. Конечно, на данный момент, Calmira не такая надёжная, как планировалось, но все баги и недоработки исправляются, дистрибутив активно развивается.

В-четвёртых, в большинстве дистрибутивов Linux было установлено большое число абсолютно ненужного ПО, которое только занимало место, но не более. В новой системе Calmira этого же быть не должно. Она должна быть максимально лёгкой и без лишнего мусора, но, одновременно, и не в ущерб функциональности.

Calmira была названа в честь одноимённой графической оболочки для Windows 3.11. Первоначально планировалось назвать дистрибутив "CalmiraOS", но через некоторое время было принято название "Calmira GNU/Linux".

## Первые версии

### 2021.1 - первый блин комом

Версия 2021.1 вышла 23 апреля 2021 года. Собиралась тогда по LFS 9.0. На данный момент образ с системой является утерянным. Система выдачи версий дистрибутиву была простой. До точки - год выпуска дистрибутива, после (мажорная версия) - номер версии. В некоторых релизах добавляется ещё одна точка и число после неё (минорная версия). Просто небольшое обновление с исправлением багов (например, 2021.2.1).

Первая версия (2021.1) содержала в себе очень много багов и недоработок, начиная от нерабочего `gmp`, заканчивая остуствия какого-либо инструмента для работы с пакетами (кроме систем сборки, конечно). Потом вскрылись и другие проблемы: полурабочий `wget` и невозможность сборки Xorg. Чуть позже был написан `cpkgi-tools` - то, из чего впоследствии получился автоматизированная утилита для работы с пакетами `cpkg`. А cpkgi-tools (Calmira Package Installer Tools) в то время мог только устанавливать ПО, об удалении и прочих функциях не было и речи. Хотя были какие-то концепты для добавления жизненно важных функций, но они не были реализованы окончательно ввиду большой разрозненности - разные программы для установки, удаления и просмотра информации о пакете, а так же абсолютно разные общие функции для этого.

Самым главным достоинством cpkg было то, что пакет он ставил в отдельную директорию (`/usr/user`). Но были и минусы - сильное раздувание PATH, поэтому чуть позже от этого отказались. Были очень жёсткие ограничения на имя пакета (так, например, в нём не должно было содержаться ничего, кроме имени пакета и расширения `tar.xz`, которое в будущем сократилось до `txz`), а так же кол-во файлов. Были серьёзные проблемы с добавлением пакета в базу данных Однако `cpkgi-tools` задал формат пакетов для будущего cpkg. Этот формат, кстати, используется до сих пор, только немного дополнялся.

Что и говорить - сначала у Calmira не было и собственного логотипа! Он появился почти перед выходом версии 2021.2 и являлся перерисованным изображением одноимённой оболочки для Win3.11. Логотип неофициальный, и до сих пор не считается логотипом дистрибутива, хотя некоторые его компоненты (например, просмотр информации о версии дистрибутива) используют его, а на официальном сайте выложен скриншот дистрибутива с выводом в терминал ASCII-версии логотипа.

Как говорится, первый блин комом. Но Calmira 2021.1 дала очень большой опыт в создании дистрибутивов (до этого автор "забавлялся" пересборкой Debian, AntiX и Mint), а так же после выхода этой версии появилось очень много планов, некоторые из которых не реализованы и сегодня.

Как назло, первая версия была утеряна при создании sqsh-снимка для отправки дистрибутива знакомым для их оценки. Поэтому этот релиз не был выложен на GitHub. Возможно, в скором времени будет воссоздана эта версия.

### 2021.2 - формирование новой редакции с сервером Xorg и учёт некоторых старых ошибок

Версия 2021.2 выгодно отличается от предыдущей. Из неё был убран `cpkgi-tools` и добавлен новый cpkg, исправлен баг с пакетом `gmp`, из-за небольшого упущения в сборке которого невозможно было скомпилировать 90% программ на Calmira. В минимальную поставку было добавлено несколько новых пакетов. Так же начались работы над созданием репозитория с бинарными пакетами для cpkg.

Автоматизированная утилита для работы с пакетами `cpkg` тогда многого не умел. Работал он нестабильно, но был намного лучше предыдущих `cpkgi-tools`. Добавили нормальную базу данных пакетов, установка и удаление пакета работали намного быстрее и надёжнее, было снято большое число ограничений. Добавили pre- и postinstall скрипты, а ближе к релизу Calmira 2021.3 cpkg научится собирать ПО из исходного кода самостоятельно на основе предварительно приготовленных инструкций для сборки.

Да, пока ещё cpkg - АУРП. Пакетным менеджером его в то время назвать было трудно - функционал был небольшим. Но скоро всё изменится в лучшую сторону. Релиз `cpkg 1.0pa4` поменяет скромное "Автоматизированная утилита для работы с пакетами" на гордое "пакетный менеджер". `pa4` означало "pre-alpha 4". У cpkg была немного другая система наименования версий, но очень похожая на то, что будет через релиз в будущем.

Однако баги так же были (а как же без них?). Например, сломанный `make-ca` и невозможность скачивания файлов с помощью `wget` без ключа `--no-check-certificates`, нерабочий `git` и полурабочий `uptime` (возможно, сломанными были и другие утилиты).

Было обновлено большое число пакетов и конфигов, а так же дистрибутив начал потреблять меньше оперативной памяти.

Помимо этого, была подготовлена отдельная редакция с сервером Xorg, а так же бинарный пакет с оконным менеджером Fluxbox (который нужно было установить вручную посредством нового cpkg).

### 2021.3 - небольшое обновление

В этом релизе было подготовлено несколько мелких, но довольно важных обновлений - новая предварительная версия cpkg, некоторые изменения в поставке ПО из минимальной сборки, отказ от редакции с Xorg, так как в планах было создание бинарных пакетов с этим сервером.

Начиная с этой версии начинает меняться позиционирование дистрибутива. Теперь это не просто легковесный дистрибутив, а минималистичная гибкая и быстрая система для решения узкого круга задач. Был создан "Манифест разработчиков Calmira" (он же "Несколько принципов построения ОС Calmira GNU/Linux"), в котором были установлены жёсткие ограничения на потребление дистрибутивом ресурсов ПК и установленный в нём софт.

В этом манифесте было описано несколько принципов: делать систему максимально компактной и минималистичной, но не в ущерб функциональности; ориентировать систему не для новичка, а на продвинутого пользователя; обеспечивать максимальную свободу пользователю; не использовать наработки Calmira во вред; делиться наработками с сообществом, если автор наработок считает это нужным.

В cpkg добавили массу новых функций, таких как скачивание пакета с репозиториев, обновление списка пакетов, а так же создание локального репозитория. cpkg научился собирать ПО из исходного кода. В этот релиз дистрибутива вошёл cpkg 1.0pa4 с массой новых изменений. На то время это был самый крупный релиз за всю историю cpkg.

Но увы - разработка этой версии была окончена во время тестирования. Несмотря на то, что это был относительно неплохой релиз, изменений в нём было довольно мало, а предыдущая версия 2021.2 всех устраивала. Поэтому все изменения было принято отложить на будущее.

### LX4 1.0 - смена структуры директорий на упрощённую, повышение стабильности дистрибутива и куча других изменений

Самое большое изменение - это отказ от LFS в сторону молодого Linux4Yourself, сокращённо называемым LX4Y, LX4U либо же совсем коротко - LX4 (Linux4Yourself, кстати, появился через некоторое время после старта разработки Calmira 2021.1). Вместе с этим переходом изменилась и структура каталогов системы. В LX4 (и будущих LFS 11, кстати, тоже) отсутствуют `/bin`, `/sbin`, `/usr/sbin` и `/lib` - они заменены ссылками на `/usr/bin` и `/usr/lib` соотв. Это менее безопасно, а так же делает систему не такой гибкой (предыдущие релизы могли вообще без `/usr` загружаться и нормально работать). Это противоречит философии Calmira. В релизе LX4 1.1 это будет исправлено.

Вы могли заметить, что и система наименования версий дистрибутива поменялась. Вместо запутанной "годовой" (так называет разработчик Calmira предыдущую систему наименования версий) используется более простая. Мажорная версия (число до точки) значит крупное изменение, новый крупный релиз; минорная версия (число после точки) значит небольшие изменения, новый промежуточный релиз с мелкими обновлениями и изменениями. Приставка LX4 означает, что используется Linux4Yourself.

Из поставки дистрибутива был удалён пакетный менеджер cpkg, ввиду его нестабильности. Он часто приводил систему в полурабочее состояние, а с упрощённой структурой директорий может убить систему полностью. В релиз LX4 1.0 планировалось ввести систему портов (например, как в FreeBSD), но работа над ней не была закончена, поэтому введение этой системы было отложено на релиз LX4 1.1.

Так же некоторое ПО было заменено на более совершенные форки или аналоги (например, `zlib` на `zlib-ng`).

Окончательно утвердился метод сжатия пакетов и образов системы. Теперь используется `xz` как основной ввиду своей эффективности сжатия, хотя сжимает чуть медленнее всех остальных.

На этапе формирования новый цикл разработки дистрибутива. Но об этом позже.

## Что потом?

Сейчас LX4 1.0 - последняя версия дистрибутива. В неё вошло много исправлений и улучшений. Система работает быстрее и надёжнее, а так же скооро появится много возможнойстей. Через пару месяцев ожидаем окончательную версию Calmira LX4 1.1 с огромным числом изменений. За ходом разработки вы можете посмотреть у нас на GitHub. А пока подумайте - что будет в новой версии дистрибутива?
