# Введение в порты

Порты - относительно молодой, но, в тоже время, очень удобный инструмент управления ПО. На данный момент, с помощью портов можно только устанавливать и удалять ПО, но в скором времени будут доступны новые функции.

## Введение

Система портов находится в `/usr/ports`. Всё ПО разделено на категории:

* `base` - базовые порты, входящие в минимальную поставку дистрибутива;
* `kernel` - ядро и его компоненты;
* `console` - консольные утилиты;
* `optional` - дополнительный софт, не вошедший в базовую поставку дистрибутива, но который может понадобиться после установки системы;
* `xorg` - сервер X и другое ПО, такое как оконные менеджеры и рабочие окружения;

В каждой категории несколько подкаталогов с портом программы. Первые версии портов включают в себя только файл `install` с инструкциями по сборке, либо ещё `info` с информацией о пакете. В новых портах вместо `info` используется файл `config.sh`, который предназначается ещё и для занесения пакета в базу данных cpkg.

## Установка программы из портов

Для того, чтобы установить какую-либо программу из порта, нужно выполнить:

```bash
# Переход в нужную директорию
cd /usr/ports/$КАТЕГОРИЯ/$ПРОГРАММА

# Выполнение инструкций сборки и установки
./install
```

Всё ПО из портов собирается из исходного кода. В некоторых случаях сборка может занять довольно много времени (так, например, пакет `gcc` на очень слабом железе может собираться до трёх дней). Однако, у сборки очень много преимуществ:

* Возможность оптимизации программы под своё железо;
* Больший контроль при установке;
* Выбор нужных функций и удаление ненужных (если программа это поддерживает)

Иногда пакеты предоставляют к установке дополнительную документацию. Она не всем нужна, поэтому мы оставили в портах возможность выбора пользователем: ставить её или нет. Система портов всегла спрашивает пользователя об этом. Если вы отказались от установки такой документации в будущем, но она вам пригодилась позже - перейдите в директорию с портом и выполните:

```bash
chmod +x install_doc.sh
./install_doc.sh
```

Этими команлами вы установите документацию пакета.

Настоятельно советуется использовать порты вместо установки бинарных пакетов посредством `cpkg`.

Кстати, портами скоро можно будет управлять и с помощью пакетного менеджера `cpkg`. Ко второй версии Calmira планируется добавить просмотр информации и удаление пакета, установленного из порта, а так же множество других функций.

## port-пакеты cpkg

Пакетный менеджер `cpkg` умеет устанавливать не только бинарные пакеты, но и собирать ПО из исходного кода. Но у такого подхода несколько минусов:

* Отсутствие контроля. Если в портах каждую инструкцию можно изменить так, как нужно человеку, то в случае с port-пакетами cpkg так не случится. Для редактирования инструкций сборки предётся распаковывать пакет, править его, а потом запаковывать обратно.
* Нестабильность. Несмотря на то, что механизм port-пакетов уже достаточно стабилен, могут возникать ошибки.
* Небольшое число пакетов. Для пакетного менеджера `cpkg` очень мало port-пакетов. Выбор очень невелик, а единственный репозиторий с port-пакетами было принято решение закрыть после выхода полноценной системы портов.

> Рекомендуется использовать систему портов, а не сборку port-пакетов с помощью cpkg.
