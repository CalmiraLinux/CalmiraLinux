# makesystem2

`makesystem` - shell-скрипт для автоматизированной сборки системы. Долгое время его возможностей вполне хватало, но потребовалось расширение функционала. `makesystem2` - вторая версия скрипта, переписанного на Python.

## Использование:

```bash
# /usr/bin/python3 makesystem.py
```

## Изменения

Удобная конфигурация конфига (в файле `/etc/makesystem.json`), быстрая расширяемость дополнительными модулями, более простая структура скрипта.

## Hacking

Конфигурация скрипта описана в файле `/etc/makesystem.json`. В секции `files` перечислен список всех необходимых файлов с инструкциями по сборке. В `packages` - порядок сборки пакетов, составленный с учётом всех зависимостей и конфликтов пакетов. Инструкции взяты из [системы портов Calmira](https://github.com/CalmiraLinux/Ports).

Секция `systemd-packages` содержит порядок сборки пакетов для редакции системы с systemd, секция `systemv-packages` - с редакцией системы sysvinit.

## Время сборки

Время сборки примерно такое же, как и при использовании предыдущей реализации скрипта.

## Поддержка версий

На данный момент поддерживается две версии скрипта: предыдущий `makesystem` и новый `makesystem2`. Первый будет поддерживаться некоторое время после выхода Calmira LX4 1.1, однако последующая сборка будет производиться новой версией скрипта. Именно поэтому в репозитории содержится две реализации makesystem.

## TODO

- [ ] Сборка разных редакций системы;
- [ ] Автоматизированное разворачивание временного тулчейна со всем необходимым;
- [ ] Автоматизированная упаковка в squashfs-образ;
